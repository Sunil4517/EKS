sudo sysctl -w vm.max_map_count=262144

cat > BCAA_PA.crt <<- EOM
-----BEGIN CERTIFICATE-----
MIIGyDCCBbCgAwIBAgITQQAB83Wf/rUNk+D1iwACAAHzdTANBgkqhkiG9w0BAQsF
ADBjMRIwEAYKCZImiZPyLGQBGRYCY2ExEjAQBgoJkiaJk/IsZAEZFgJiYzEUMBIG
CgmSJomT8ixkARkWBGJjYWExIzAhBgNVBAMTGkJDQUEgRW50ZXJwcmlzZSBJc3N1
aW5nIENBMB4XDTE5MDkwMzE4MzQ1MFoXDTI2MDUyOTE4MzQ1MFowgZgxCzAJBgNV
BAYTAkNBMQswCQYDVQQIEwJCQzEQMA4GA1UEBxMHQnVybmFieTENMAsGA1UEChME
QkNBQTEUMBIGA1UECxMLSVMgU2VjdXJpdHkxITAfBgNVBAMTGEJDQUEgUEEgSW50
ZXJuZXQgR2F0ZXdheTEiMCAGCSqGSIb3DQEJARYTaXNzZWN1cml0eUBiY2FhLmNv
bTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJrgTBk5dH7ds/BXmCGq
u3Z3Mt3L+3ljeTU4YD4EbGyOv8kBnvuXMvQecE4/kBDnSFJMDYF+fu0uXwK7nmWe
ef+zFTC05QDYQc7IqNniRM7/VFpuZM7sq89zEK6YeL6VvT6ZBmlZGNMPhvu07o6f
ehyaWR6mKYPg/Bf/BwiOL65L4vHR8SRd9z2POGkF57RBtuNqsXMyS4IRI/JuJ+Wv
gmMbbJefH6gHVvZGOvcnDab+cv+dzdmaSs7mkpvrQ9YDHe0xaWyl9LFNo4JzAI4Z
h9ZuUQw0Vv3H85FidwEYJAzOY96P/BcMVQnQEIn1DC4+Ns+XEb3D7oulXVtShT+n
k2sCAwEAAaOCAz0wggM5MB0GA1UdDgQWBBTfzCdzLCRXnX087JtyI1Z2UJn3GjAf
BgNVHSMEGDAWgBRbRFgcQfUeXsxA96DRNLN4cOE06jCCATAGA1UdHwSCAScwggEj
MIIBH6CCARugggEXhoHPbGRhcDovLy9DTj1CQ0FBJTIwRW50ZXJwcmlzZSUyMElz
c3VpbmclMjBDQSxDTj1pbmYtcHJkLWNlcjAyLENOPUNEUCxDTj1QdWJsaWMlMjBL
ZXklMjBTZXJ2aWNlcyxDTj1TZXJ2aWNlcyxDTj1Db25maWd1cmF0aW9uLERDPWJj
YWEsREM9YmMsREM9Y2E/Y2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdD9iYXNlP29i
amVjdENsYXNzPWNSTERpc3RyaWJ1dGlvblBvaW50hkNodHRwOi8vcGtpLmJjYWEu
Y29tL2NlcnRlbnJvbGwvQkNBQSUyMEVudGVycHJpc2UlMjBJc3N1aW5nJTIwQ0Eu
Y3JsMIIBLwYIKwYBBQUHAQEEggEhMIIBHTCBwQYIKwYBBQUHMAKGgbRsZGFwOi8v
L0NOPUJDQUElMjBFbnRlcnByaXNlJTIwSXNzdWluZyUyMENBLENOPUFJQSxDTj1Q
dWJsaWMlMjBLZXklMjBTZXJ2aWNlcyxDTj1TZXJ2aWNlcyxDTj1Db25maWd1cmF0
aW9uLERDPWJjYWEsREM9YmMsREM9Y2E/Y0FDZXJ0aWZpY2F0ZT9iYXNlP29iamVj
dENsYXNzPWNlcnRpZmljYXRpb25BdXRob3JpdHkwVwYIKwYBBQUHMAKGS2h0dHA6
Ly9wa2kuYmNhYS5jb20vQ2VydEVucm9sbC9CQ0FBX0JDQUElMjBFbnRlcnByaXNl
JTIwSXNzdWluZyUyMENBKDIpLmNydDASBgNVHRMBAf8ECDAGAQH/AgEAMAsGA1Ud
DwQEAwIBhjA9BgkrBgEEAYI3FQcEMDAuBiYrBgEEAYI3FQiExJEqmvtVhKGHE4XX
z1yD3/sfgSOBxet6grGBAAIBZAIBGTATBgNVHSUEDDAKBggrBgEFBQcDATAbBgkr
BgEEAYI3FQoEDjAMMAoGCCsGAQUFBwMBMA0GCSqGSIb3DQEBCwUAA4IBAQDAC8lU
gLLaIF9kqxtiuPfjrX2opKQvc2av7lBF1tbPy4TcAco6i7ofO3Wemtc6jAPsuocA
+/HSAP0Kq6I87wX4WaVGLE9CSdX4zFrFObavqk2/de57rXocqaZiO0IYdAAZdaCF
DnFXgOg4JkVxSoHl5kCO1+PxwMvvBRN+ajwTxWl+xqO83R6wtG6LajkBx+0EIYvq
9mtBWpil6BpYpHMvTSACkoP9sKxA6JpxW4QKDBbkzs79sSPAMTHRzsfmCTlsNmjk
HwhG4L8bP3iwZa/mRmZpnc0sg4nM7T9egBVG7zCYid4NnwDpDYTM8wYp/I2euFBl
VIdmO53Ns6y7MW42
-----END CERTIFICATE-----
EOM

cat > BCAA_InterCA.crt <<- EOM
-----BEGIN CERTIFICATE-----
MIIF2jCCBMKgAwIBAgITZQAAAAUZ6vKdjMAzdQAAAAAABTANBgkqhkiG9w0BAQsF
ADAZMRcwFQYDVQQDEw5CQ0FBLVJPT1RDQS1DQTAeFw0xNzA3MjQyMDE0MDlaFw0y
NjA3MTgxODQ0MzhaMGMxEjAQBgoJkiaJk/IsZAEZFgJjYTESMBAGCgmSJomT8ixk
ARkWAmJjMRQwEgYKCZImiZPyLGQBGRYEYmNhYTEjMCEGA1UEAxMaQkNBQSBFbnRl
cnByaXNlIElzc3VpbmcgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB
AQDZ6x3qEEKJE3DERdzs9PpiVC/N9dAL7G9uU/XGRi/I9daSAoFgUQlO35JviKTJ
wYOhdq9WJWmxJEi2bbRZfaYcNuKbmBK/WIkr/RwQfCKxU/5SxYiNBGGTq5sA1hmB
Std7EDsDCtKbTTgpLXr+F6YLJREEh/llmrNfpuj6leJqyE3k6YwQyZqsAyewX6iu
SJ96aag3gygNrI9blADVnzCF04CdQWpAgaq1oL9tKCCijyZJY1OCmOSpapIIwflC
kIeUhdLW9t9joj5iz8fWIxwAyZJHAueEHFyK/nx9sPlRk+2NhEIO5EYcoavsc2c0
4vfWEoRGtZT59M9MIw+BNoixAgMBAAGjggLPMIICyzAQBgkrBgEEAYI3FQEEAwIB
AjAjBgkrBgEEAYI3FQIEFgQUEevma5mNpZ27bKKKmHalA39cNMEwHQYDVR0OBBYE
FFtEWBxB9R5ezED3oNE0s3hw4TTqMBkGCSsGAQQBgjcUAgQMHgoAUwB1AGIAQwBB
MAsGA1UdDwQEAwIBhjAPBgNVHRMBAf8EBTADAQH/MB8GA1UdIwQYMBaAFL+FbqWS
2TL3ugRyckLrbvrH53OaMIIBBQYDVR0fBIH9MIH6MIH3oIH0oIHxhoG7bGRhcDov
Ly9DTj1CQ0FBLVJPT1RDQS1DQSxDTj1CY2FhLVJvb3RDQSxDTj1DRFAsQ049UHVi
bGljJTIwS2V5JTIwU2VydmljZXMsQ049U2VydmljZXMsQ049Q29uZmlndXJhdGlv
bixEQz1iY2FhLERDPWJjLERDPWNhP2NlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q/
YmFzZT9vYmplY3RDbGFzcz1jUkxEaXN0cmlidXRpb25Qb2ludIYxaHR0cDovL3Br
aS5iY2FhLmNvbS9DZXJ0RW5yb2xsL0JDQUEtUk9PVENBLUNBLmNybDCCAQ4GCCsG
AQUFBwEBBIIBADCB/TCBrwYIKwYBBQUHMAKGgaJsZGFwOi8vL0NOPUJDQUEtUk9P
VENBLUNBLENOPUFJQSxDTj1QdWJsaWMlMjBLZXklMjBTZXJ2aWNlcyxDTj1TZXJ2
aWNlcyxDTj1Db25maWd1cmF0aW9uLERDPWJjYWEsREM9YmMsREM9Y2E/Y0FDZXJ0
aWZpY2F0ZT9iYXNlP29iamVjdENsYXNzPWNlcnRpZmljYXRpb25BdXRob3JpdHkw
SQYIKwYBBQUHMAKGPWh0dHA6Ly9wa2kuYmNhYS5jb20vQ2VydEVucm9sbC9CY2Fh
LVJvb3RDQV9CQ0FBLVJPT1RDQS1DQS5jcnQwDQYJKoZIhvcNAQELBQADggEBAJxb
KmbUwxISqVk/NVV84HtXfWIFJMr1x1Mv26AK7hS70nS1aXTkuB8Dh56pwZjak624
Gfl6tlbMSTMi5pQNQUcWcPR8J+EuVepix66pnV9V8Ww461EALqOib3Oz82rXA+AR
KS2c0dxob4YgI00EAKhAqE/lU0NFPwuHGV/fDxhTEphTj8XSENKqxEbvOHXdbTYr
l8xeWdQQMMPwqS6Nhe/crhiA7NK85d3N6Iv8PDxOATHDvHtzi/uFzcD9XtGN1DYI
jTkPDGlaSgbhIgrhYps9CGsXQp3Tm52Eifa0G00WwXdIwX75joOxnHlKLagLi9uC
5dnp+WCxKpZfUV3j5l4=
-----END CERTIFICATE-----
EOM

cat > BCAA_ROOT.crt <<- EOM
-----BEGIN CERTIFICATE-----
MIIDDTCCAfWgAwIBAgIQesqFXZ1zhK1FTjqBygzQgTANBgkqhkiG9w0BAQsFADAZ
MRcwFQYDVQQDEw5CQ0FBLVJPT1RDQS1DQTAeFw0xNjA3MTgxODM0MzlaFw0yNjA3
MTgxODQ0MzhaMBkxFzAVBgNVBAMTDkJDQUEtUk9PVENBLUNBMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2415mSVbbeeIeVXIJym8TUBzZ+wPKlv6PBHd
RjYVfHmUVHsMU7VrpAAa/lSooM6vqeIqQqUV6hfd70ZPZhBncnxNhrGVAZl2WmJY
bU2TjHEi+n9UEPdW5biJgwtNXasS2yH1J4w3rNBFdo4+N9ZaD6eoTolV8wIHapxP
1N1ToBzIqZeK0X4hJ1YmPrUKaottSEyzVvCB22sauKfnj/QLFTa6X/Xu36zIi44M
JUGcAUqwDJ5n1AV7N2HDWTTcuNbVJgQmUTdIjdDQxfCgAsbxsNIJAnNQS+URJ2Dj
NF/AxHAoaukYjnhjT1n79XEnapNhSWslfialGahHVSqF52Z3AQIDAQABo1EwTzAL
BgNVHQ8EBAMCAYYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUv4VupZLZMve6
BHJyQutu+sfnc5owEAYJKwYBBAGCNxUBBAMCAQAwDQYJKoZIhvcNAQELBQADggEB
AFdLxmiwtLjflvRxZLCZ1ou35RLq+Qgswhy3HhgjX9LCfAmFb2Hxag3qAVp+ZW1x
eQEzIL75QUUuOgbA3B5V8fB/BrSz7I+m+6PBWZJOjZXrWrpzUd6Tf63du7Cf+8gt
TVGy0bn3aPUgWTdeVsvCp+eiwrOuhBzTiULiFnSyWsK5OX+kCc2V/s4BHf2FNzMF
U0ptsTqYt83+1HFCrYLrAgy0cJs+72+vz0AOQmXFr6e5MBGQi7FKAkhp0wJEahNv
eHs17d4VTl1hGfEY1aQ71lFPVSlEXKNc2aF5sJhVDxhUY9BQUofh2OvEGqB244HD
HLmF02CP1URBXgunbd8iRYA=
-----END CERTIFICATE-----
EOM

sudo chown root:root *.crt
sudo chmod 444 *.crt
#sudo cp *.crt /usr/share/pki/ca-trust-source/anchors/
#sudo update-ca-trust
sudo cp *.crt /etc/ssl/certs

sudo yum install -y https://s3.us-west-2.amazonaws.com/amazon-ssm-us-west-2/latest/linux_amd64/amazon-ssm-agent.rpm 
sudo systemctl enable amazon-ssm-agent
sudo systemctl start amazon-ssm-agent